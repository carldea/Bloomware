package me.offeex.bloomware.client.module.modules.exploit;

import com.google.common.eventbus.Subscribe;
import me.offeex.bloomware.api.event.events.EventPacket;
import me.offeex.bloomware.client.command.CommandManager;
import me.offeex.bloomware.client.module.Module;
import me.offeex.bloomware.client.setting.Setting;
import net.minecraft.network.packet.s2c.play.PlaySoundS2CPacket;
import net.minecraft.sound.SoundEvents;

public class SoundTracker extends Module {
    private final Setting<Boolean> thunder = register("ThunderSound", true);
    private final Setting<Boolean> endPortal = register("EndPortalSound", true);

    public SoundTracker() {
        super("SoundTracker", "Allows you to see coords sound from.", Category.EXPLOIT, false);
    }

    @Subscribe
    public void onPacketReceive(EventPacket.Receive event) {
        if (event.getPacket() instanceof PlaySoundS2CPacket) {
            if (((PlaySoundS2CPacket) event.getPacket()).getSound() == SoundEvents.ENTITY_LIGHTNING_BOLT_THUNDER && thunder.getValue()) {
                CommandManager.addChatMessage("Thunder sound detected -> " + (((PlaySoundS2CPacket) event.getPacket()).getX()) + ", " + (((PlaySoundS2CPacket) event.getPacket()).getY()) + ", " + (((PlaySoundS2CPacket) event.getPacket()).getZ()));
            }
            if (((PlaySoundS2CPacket) event.getPacket()).getSound() == SoundEvents.BLOCK_END_PORTAL_SPAWN && endPortal.getValue()) {
                CommandManager.addChatMessage("End portal sound detected -> " + (((PlaySoundS2CPacket) event.getPacket()).getX()) + ", " + (((PlaySoundS2CPacket) event.getPacket()).getY()) + ", " + (((PlaySoundS2CPacket) event.getPacket()).getZ()));
            }
        }
    }
}
